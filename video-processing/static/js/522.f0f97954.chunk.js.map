{"version":3,"file":"static/js/522.f0f97954.chunk.js","mappings":"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","sources":["../../../utils/src/canvas.ts","../../../utils/src/createFpsMeter.ts","../../../utils/src/mediaStreamToVideo.ts","../../../video-processor/node_modules/@mediapipe/camera_utils/camera_utils.js","../../../video-processor/src/VideoProcessors/MediaPipe/drawImageMask/drawBackgroundImageMask.ts","../../../video-processor/src/VideoProcessors/MediaPipe/drawImageMask/drawBlurImageMask.ts","../../../video-processor/src/VideoProcessors/MediaPipe/drawImageMask/index.ts","../../../video-processor/src/VideoProcessors/MediaPipe/startVideoProcessing.ts","../../../video-processor/src/VideoProcessors/MediaPipe/index.ts"],"sourcesContent":["export type TCanvas = HTMLCanvasElement | OffscreenCanvas;\n\nexport const createCanvas = (width: number, height: number): HTMLCanvasElement => {\n  const canvas = document.createElement('canvas');\n\n  canvas.width = width;\n  canvas.height = height;\n\n  return canvas;\n};\n\nexport const getContext = <T = CanvasRenderingContext2D>(\n  canvas: TCanvas,\n  {\n    type = '2d',\n    imageSmoothingQuality,\n    globalCompositeOperation,\n    alpha = false,\n  }: {\n    type?: '2d';\n    imageSmoothingQuality?: ImageSmoothingQuality;\n    globalCompositeOperation?: GlobalCompositeOperation;\n    alpha?: boolean;\n  } = {}\n): T => {\n  const context = canvas.getContext(type, {\n    alpha,\n    desynchronized: true,\n    willReadFrequently: true,\n  }) as CanvasRenderingContext2D;\n\n  if (imageSmoothingQuality) {\n    context.imageSmoothingEnabled = true;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n  }\n\n  if (globalCompositeOperation) {\n    context.globalCompositeOperation = globalCompositeOperation;\n  }\n\n  const contextReturned = context as unknown as T;\n\n  return contextReturned;\n};\n\nexport const createOffScreenCanvas = (width: number, height: number): OffscreenCanvas => {\n  const offScreenCanvas = new OffscreenCanvas(width, height);\n\n  return offScreenCanvas;\n};\n\nexport const fill = (\n  canvas: TCanvas,\n  {\n    x = 0,\n    y = 0,\n    width,\n    height,\n    color = '#202020',\n  }: {\n    x?: number;\n    y?: number;\n    width: number;\n    height: number;\n    color?: string;\n  }\n) => {\n  const context = getContext(canvas);\n\n  context.fillStyle = color;\n  context.fillRect(x, y, width, height);\n};\n\nconst getImageSizes = (image: CanvasImageSource | ImageBitmap) => {\n  const { height, width } = image as { width: number; height: number };\n\n  return { height, width };\n};\n\nexport const renderImageDataToCanvas = (image: ImageData, canvas) => {\n  const context = getContext(canvas);\n\n  context.putImageData(image, 0, 0);\n};\n\nexport const renderImageToCanvas = (\n  image: CanvasImageSource,\n  canvas: TCanvas,\n  {\n    x = 0,\n    y = 0,\n    width,\n    height,\n    imageSmoothingQuality,\n    alpha,\n    globalCompositeOperation,\n  }: {\n    x?: number;\n    y?: number;\n    width?: number;\n    height?: number;\n    imageSmoothingQuality?: ImageSmoothingQuality;\n    alpha?: boolean;\n    globalCompositeOperation?: GlobalCompositeOperation;\n  } = {}\n) => {\n  const imageSizes = getImageSizes(image);\n  const targetWidth = width || imageSizes.width;\n  const targetHeight = height || imageSizes.height;\n  const context = getContext(canvas, { imageSmoothingQuality, alpha, globalCompositeOperation });\n\n  context.drawImage(image, x, y, targetWidth, targetHeight);\n};\n\nconst drawAndBlurImageOnCanvas = (image, blurAmount, canvas) => {\n  const { height, width } = image;\n  const context = getContext(canvas);\n\n  context.clearRect(0, 0, width, height);\n  context.save();\n\n  context.filter = `blur(${blurAmount}px)`;\n  context.drawImage(image, 0, 0, width, height);\n\n  context.restore();\n};\n\nexport const drawAndBlurImageOnOffScreenCanvas = ({\n  canvas,\n  image,\n  blurAmount,\n}: {\n  canvas: OffscreenCanvas;\n  image: CanvasImageSource;\n  blurAmount: number;\n}) => {\n  if (blurAmount === 0) {\n    renderImageToCanvas(image, canvas);\n  } else {\n    drawAndBlurImageOnCanvas(image, blurAmount, canvas);\n  }\n};\n\nexport const drawWithCompositing = (\n  context: CanvasRenderingContext2D,\n  image: CanvasImageSource,\n  compositeOperation,\n  desiredWidth,\n  desiredHeight\n) => {\n  context.globalCompositeOperation = compositeOperation;\n\n  const { width, height } = image;\n\n  context.drawImage(\n    image,\n    0,\n    0,\n    // @ts-ignore\n    width,\n    height,\n    0,\n    0,\n    desiredWidth,\n    desiredHeight\n  );\n};\n\nexport const imageBitmapToImageData = (canvas, imageBitmap, desiredWidth, desiredHeight) => {\n  const { width, height } = imageBitmap;\n  const context = getContext(canvas);\n\n  context.drawImage(imageBitmap, 0, 0, width, height, 0, 0, desiredWidth, desiredHeight);\n\n  const imageData = context.getImageData(0, 0, desiredWidth, desiredHeight);\n\n  return imageData;\n};\n\nexport const imageToImageBitmap = ({\n  canvas,\n  image,\n}: {\n  canvas: OffscreenCanvas;\n  image: CanvasImageSource;\n}) => {\n  renderImageToCanvas(image, canvas);\n\n  return canvas.transferToImageBitmap();\n};\n","import Stats from 'stats-js';\n\nconst createFpsMeter = () => {\n  let stats;\n  let isBegins = false;\n  let isEnded = true;\n  const init = () => {\n    isBegins = false;\n    isEnded = true;\n    stats = new Stats();\n    stats.showPanel(0);\n\n    if (window.screen.width > 500) {\n      document.body.appendChild(stats.dom);\n    }\n  };\n  const begin = () => {\n    if (stats && isEnded && !isBegins) {\n      isEnded = false;\n      isBegins = true;\n      stats.begin();\n    }\n  };\n  const end = () => {\n    if (stats && isBegins && !isEnded) {\n      isEnded = true;\n      isBegins = false;\n      stats.end();\n    }\n  };\n  const reset = () => {\n    document.body.removeChild(stats.dom);\n    stats = undefined;\n  };\n\n  return { init, begin, end, reset };\n};\n\nexport default createFpsMeter;\n","const mediaStreamToVideo = (mediaStream: MediaStream): Promise<HTMLVideoElement> => {\n  const videoElement = document.createElement('video');\n\n  videoElement.srcObject = mediaStream;\n\n  return new Promise((resolve) => {\n    videoElement.onloadedmetadata = () => {\n      videoElement.width = videoElement.videoWidth;\n      videoElement.height = videoElement.videoHeight;\n      videoElement.play();\n      resolve(videoElement);\n    };\n  });\n};\n\nexport default mediaStreamToVideo;\n","(function(){/*\n\n Copyright The Closure Library Authors.\n SPDX-License-Identifier: Apache-2.0\n*/\n'use strict';function n(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var q=\"function\"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){if(a==Array.prototype||a==Object.prototype)return a;a[b]=e.value;return a};\nfunction t(a){a=[\"object\"==typeof globalThis&&globalThis,a,\"object\"==typeof window&&window,\"object\"==typeof self&&self,\"object\"==typeof global&&global];for(var b=0;b<a.length;++b){var e=a[b];if(e&&e.Math==Math)return e}throw Error(\"Cannot find global object\");}var u=t(this);function v(a,b){if(b)a:{var e=u;a=a.split(\".\");for(var f=0;f<a.length-1;f++){var h=a[f];if(!(h in e))break a;e=e[h]}a=a[a.length-1];f=e[a];b=b(f);b!=f&&null!=b&&q(e,a,{configurable:!0,writable:!0,value:b})}}\nv(\"Symbol\",function(a){function b(l){if(this instanceof b)throw new TypeError(\"Symbol is not a constructor\");return new e(f+(l||\"\")+\"_\"+h++,l)}function e(l,c){this.g=l;q(this,\"description\",{configurable:!0,writable:!0,value:c})}if(a)return a;e.prototype.toString=function(){return this.g};var f=\"jscomp_symbol_\"+(1E9*Math.random()>>>0)+\"_\",h=0;return b});\nv(\"Symbol.iterator\",function(a){if(a)return a;a=Symbol(\"Symbol.iterator\");for(var b=\"Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array\".split(\" \"),e=0;e<b.length;e++){var f=u[b[e]];\"function\"===typeof f&&\"function\"!=typeof f.prototype[a]&&q(f.prototype,a,{configurable:!0,writable:!0,value:function(){return w(n(this))}})}return a});function w(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}\nfunction x(a){var b=\"undefined\"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:n(a)}}function y(){this.i=!1;this.g=null;this.o=void 0;this.j=1;this.m=0;this.h=null}function z(a){if(a.i)throw new TypeError(\"Generator is already running\");a.i=!0}y.prototype.l=function(a){this.o=a};function A(a,b){a.h={F:b,G:!0};a.j=a.m}y.prototype.return=function(a){this.h={return:a};this.j=this.m};function B(a){this.g=new y;this.h=a}\nfunction C(a,b){z(a.g);var e=a.g.g;if(e)return D(a,\"return\"in e?e[\"return\"]:function(f){return{value:f,done:!0}},b,a.g.return);a.g.return(b);return H(a)}function D(a,b,e,f){try{var h=b.call(a.g.g,e);if(!(h instanceof Object))throw new TypeError(\"Iterator result \"+h+\" is not an object\");if(!h.done)return a.g.i=!1,h;var l=h.value}catch(c){return a.g.g=null,A(a.g,c),H(a)}a.g.g=null;f.call(a.g,l);return H(a)}\nfunction H(a){for(;a.g.j;)try{var b=a.h(a.g);if(b)return a.g.i=!1,{value:b.value,done:!1}}catch(e){a.g.o=void 0,A(a.g,e)}a.g.i=!1;if(a.g.h){b=a.g.h;a.g.h=null;if(b.G)throw b.F;return{value:b.return,done:!0}}return{value:void 0,done:!0}}\nfunction I(a){this.next=function(b){z(a.g);a.g.g?b=D(a,a.g.g.next,b,a.g.l):(a.g.l(b),b=H(a));return b};this.throw=function(b){z(a.g);a.g.g?b=D(a,a.g.g[\"throw\"],b,a.g.l):(A(a.g,b),b=H(a));return b};this.return=function(b){return C(a,b)};this[Symbol.iterator]=function(){return this}}function J(a){function b(f){return a.next(f)}function e(f){return a.throw(f)}return new Promise(function(f,h){function l(c){c.done?f(c.value):Promise.resolve(c.value).then(b,e).then(l,h)}l(a.next())})}\nv(\"Promise\",function(a){function b(c){this.h=0;this.i=void 0;this.g=[];this.o=!1;var d=this.j();try{c(d.resolve,d.reject)}catch(g){d.reject(g)}}function e(){this.g=null}function f(c){return c instanceof b?c:new b(function(d){d(c)})}if(a)return a;e.prototype.h=function(c){if(null==this.g){this.g=[];var d=this;this.i(function(){d.l()})}this.g.push(c)};var h=u.setTimeout;e.prototype.i=function(c){h(c,0)};e.prototype.l=function(){for(;this.g&&this.g.length;){var c=this.g;this.g=[];for(var d=0;d<c.length;++d){var g=\nc[d];c[d]=null;try{g()}catch(k){this.j(k)}}}this.g=null};e.prototype.j=function(c){this.i(function(){throw c;})};b.prototype.j=function(){function c(k){return function(m){g||(g=!0,k.call(d,m))}}var d=this,g=!1;return{resolve:c(this.A),reject:c(this.l)}};b.prototype.A=function(c){if(c===this)this.l(new TypeError(\"A Promise cannot resolve to itself\"));else if(c instanceof b)this.C(c);else{a:switch(typeof c){case \"object\":var d=null!=c;break a;case \"function\":d=!0;break a;default:d=!1}d?this.v(c):this.m(c)}};\nb.prototype.v=function(c){var d=void 0;try{d=c.then}catch(g){this.l(g);return}\"function\"==typeof d?this.D(d,c):this.m(c)};b.prototype.l=function(c){this.u(2,c)};b.prototype.m=function(c){this.u(1,c)};b.prototype.u=function(c,d){if(0!=this.h)throw Error(\"Cannot settle(\"+c+\", \"+d+\"): Promise already settled in state\"+this.h);this.h=c;this.i=d;2===this.h&&this.B();this.H()};b.prototype.B=function(){var c=this;h(function(){if(c.I()){var d=u.console;\"undefined\"!==typeof d&&d.error(c.i)}},1)};b.prototype.I=\nfunction(){if(this.o)return!1;var c=u.CustomEvent,d=u.Event,g=u.dispatchEvent;if(\"undefined\"===typeof g)return!0;\"function\"===typeof c?c=new c(\"unhandledrejection\",{cancelable:!0}):\"function\"===typeof d?c=new d(\"unhandledrejection\",{cancelable:!0}):(c=u.document.createEvent(\"CustomEvent\"),c.initCustomEvent(\"unhandledrejection\",!1,!0,c));c.promise=this;c.reason=this.i;return g(c)};b.prototype.H=function(){if(null!=this.g){for(var c=0;c<this.g.length;++c)l.h(this.g[c]);this.g=null}};var l=new e;b.prototype.C=\nfunction(c){var d=this.j();c.s(d.resolve,d.reject)};b.prototype.D=function(c,d){var g=this.j();try{c.call(d,g.resolve,g.reject)}catch(k){g.reject(k)}};b.prototype.then=function(c,d){function g(p,r){return\"function\"==typeof p?function(E){try{k(p(E))}catch(F){m(F)}}:r}var k,m,G=new b(function(p,r){k=p;m=r});this.s(g(c,k),g(d,m));return G};b.prototype.catch=function(c){return this.then(void 0,c)};b.prototype.s=function(c,d){function g(){switch(k.h){case 1:c(k.i);break;case 2:d(k.i);break;default:throw Error(\"Unexpected state: \"+\nk.h);}}var k=this;null==this.g?l.h(g):this.g.push(g);this.o=!0};b.resolve=f;b.reject=function(c){return new b(function(d,g){g(c)})};b.race=function(c){return new b(function(d,g){for(var k=x(c),m=k.next();!m.done;m=k.next())f(m.value).s(d,g)})};b.all=function(c){var d=x(c),g=d.next();return g.done?f([]):new b(function(k,m){function G(E){return function(F){p[E]=F;r--;0==r&&k(p)}}var p=[],r=0;do p.push(void 0),r++,f(g.value).s(G(p.length-1),m),g=d.next();while(!g.done)})};return b});\nvar K=\"function\"==typeof Object.assign?Object.assign:function(a,b){for(var e=1;e<arguments.length;e++){var f=arguments[e];if(f)for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(a[h]=f[h])}return a};v(\"Object.assign\",function(a){return a||K});var L=this||self;var M={facingMode:\"user\",width:640,height:480};function N(a,b){this.video=a;this.i=0;this.h=Object.assign(Object.assign({},M),b)}N.prototype.stop=function(){var a=this,b,e,f,h;return J(new I(new B(function(l){if(a.g){b=a.g.getTracks();e=x(b);for(f=e.next();!f.done;f=e.next())h=f.value,h.stop();a.g=void 0}l.j=0})))};\nN.prototype.start=function(){var a=this,b;return J(new I(new B(function(e){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert(\"No navigator.mediaDevices.getUserMedia exists.\");b=a.h;return e.return(navigator.mediaDevices.getUserMedia({video:{facingMode:b.facingMode,width:b.width,height:b.height}}).then(function(f){O(a,f)}).catch(function(f){var h=\"Failed to acquire camera feed: \"+f;console.error(h);alert(h);throw f;}))})))};\nfunction P(a){window.requestAnimationFrame(function(){Q(a)})}function O(a,b){a.g=b;a.video.srcObject=b;a.video.onloadedmetadata=function(){a.video.play();P(a)}}function Q(a){var b=null;a.video.paused||a.video.currentTime===a.i||(a.i=a.video.currentTime,b=a.h.onFrame());b?b.then(function(){P(a)}):P(a)}var R=[\"Camera\"],S=L;R[0]in S||\"undefined\"==typeof S.execScript||S.execScript(\"var \"+R[0]);\nfor(var T;R.length&&(T=R.shift());)R.length||void 0===N?S[T]&&S[T]!==Object.prototype[T]?S=S[T]:S=S[T]={}:S[T]=N;}).call(this);\n","import { getContext, drawWithCompositing } from '@experiments/utils/src/canvas';\nimport type { TCanvas } from '@experiments/utils/src/canvas';\n\nconst drawBackgroundImageMask = ({\n  videoSource,\n  canvas,\n  imageMask,\n  personMask,\n  edgeBlurAmount,\n}: {\n  videoSource: HTMLVideoElement;\n  canvas: TCanvas;\n  imageMask: HTMLImageElement;\n  personMask: ImageBitmap;\n  edgeBlurAmount: number;\n}) => {\n  const { width, height } = videoSource;\n  const context = getContext(canvas);\n\n  context.save();\n\n  // render original image\n  context.drawImage(videoSource, 0, 0);\n\n  if (edgeBlurAmount > 0) {\n    context.filter = `blur(${edgeBlurAmount}px)`;\n  }\n\n  drawWithCompositing(context, personMask, 'destination-in', width, height);\n\n  context.filter = 'none';\n\n  drawWithCompositing(context, imageMask, 'destination-over', width, height);\n\n  context.restore();\n};\n\nexport default drawBackgroundImageMask;\n","import { getContext, drawWithCompositing } from '@experiments/utils/src/canvas';\nimport type { TCanvas } from '@experiments/utils/src/canvas';\n\nconst drawBlurImageMask = ({\n  videoSource,\n  canvas,\n  personMask,\n  edgeBlurAmount,\n}: {\n  videoSource: HTMLVideoElement;\n  canvas: TCanvas;\n  personMask: ImageBitmap;\n  edgeBlurAmount: number;\n}) => {\n  const { width, height } = videoSource;\n  const context = getContext(canvas);\n\n  context.save();\n  // render original image\n  context.drawImage(videoSource, 0, 0);\n\n  drawWithCompositing(context, personMask, 'destination-in', width, height);\n\n  context.filter = `blur(${edgeBlurAmount}px)`;\n\n  drawWithCompositing(context, videoSource, 'destination-over', width, height);\n\n  context.filter = 'none';\n\n  context.restore();\n};\n\nexport default drawBlurImageMask;\n","import { getContext } from '@experiments/utils/src/canvas';\nimport type { TCanvas } from '@experiments/utils/src/canvas';\nimport drawBackgroundImageMask from './drawBackgroundImageMask';\nimport drawBlurImageMask from './drawBlurImageMask';\n\nconst drawImageMask = ({\n  videoSource,\n  canvas,\n  imageMask,\n  personMask,\n  edgeBlurAmount,\n  isBlurBackground,\n}: {\n  videoSource: HTMLVideoElement;\n  canvas: TCanvas;\n  imageMask: HTMLImageElement;\n  personMask?: ImageBitmap;\n  edgeBlurAmount: number;\n  isBlurBackground: boolean;\n}) => {\n  if (!personMask) {\n    const context = getContext(canvas);\n\n    context.drawImage(videoSource, 0, 0);\n\n    return;\n  }\n\n  if (isBlurBackground) {\n    drawBlurImageMask({\n      videoSource,\n      canvas,\n      personMask,\n      edgeBlurAmount,\n    });\n  } else {\n    drawBackgroundImageMask({\n      videoSource,\n      canvas,\n      imageMask,\n      personMask,\n      edgeBlurAmount,\n    });\n  }\n};\n\nexport default drawImageMask;\n","import { Camera } from '@mediapipe/camera_utils';\nimport { SelfieSegmentation } from '@mediapipe/selfie_segmentation';\nimport type { ResultsListener } from '@mediapipe/selfie_segmentation';\nimport drawImageMask from './drawImageMask';\n\nconst startVideoProcessing = ({\n  selfieSegmentation,\n  fpsMeter,\n  getImageBitmapByWidth,\n  canvasTarget,\n  videoSource,\n  getEdgeBlurAmount,\n  getIsBlurBackground,\n}: {\n  selfieSegmentation: SelfieSegmentation;\n  fpsMeter: { init: () => void; begin: () => void; end: () => void };\n  getImageBitmapByWidth: (width: number) => HTMLImageElement;\n  canvasTarget: HTMLCanvasElement;\n  videoSource: HTMLVideoElement;\n  getEdgeBlurAmount: () => number;\n  getIsBlurBackground: () => boolean;\n}) => {\n  const { width, height } = videoSource;\n  const imageBitmapMask = getImageBitmapByWidth(width);\n\n  fpsMeter.init();\n\n  const onResults: ResultsListener = (results) => {\n    drawImageMask({\n      edgeBlurAmount: getEdgeBlurAmount(),\n      isBlurBackground: getIsBlurBackground(),\n      personMask: results.segmentationMask as ImageBitmap,\n      imageMask: imageBitmapMask,\n      canvas: canvasTarget,\n      videoSource: results.image as unknown as HTMLVideoElement,\n    });\n    fpsMeter.end();\n  };\n\n  selfieSegmentation.onResults(onResults);\n\n  const camera = new Camera(videoSource, {\n    onFrame: async () => {\n      fpsMeter.begin();\n      await selfieSegmentation.send({ image: videoSource });\n    },\n    width,\n    height,\n  });\n\n  return camera.start();\n};\n\nexport default startVideoProcessing;\n","import { SelfieSegmentation } from '@mediapipe/selfie_segmentation';\nimport createFpsMeter from '@experiments/utils/src/createFpsMeter';\nimport mediaStreamToVideo from '@experiments/utils/src/mediaStreamToVideo';\nimport { createCanvas } from '@experiments/utils/src/canvas';\nimport type { TResolveProcessVideo, TModelSelection } from '../../typings';\nimport startVideoProcessing from './startVideoProcessing';\n\nconst createSelfieSegmentation = (): Promise<SelfieSegmentation> => {\n  const selfieSegmentation = new SelfieSegmentation({\n    locateFile: (file) => {\n      return `https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${file}`;\n    },\n  });\n\n  return selfieSegmentation.initialize().then(() => {\n    return selfieSegmentation;\n  });\n};\n\nconst resolveProcessVideoMediaPipe: TResolveProcessVideo = ({\n  imageBitmapMask360p,\n  imageBitmapMask720p,\n  imageBitmapMask1080p,\n}) => {\n  const getImageBitmapByWidth = (width: number): HTMLImageElement => {\n    // eslint-disable-next-line default-case\n    switch (width) {\n      case 640:\n        return imageBitmapMask360p;\n      case 1280:\n        return imageBitmapMask720p;\n    }\n\n    return imageBitmapMask1080p;\n  };\n\n  return createSelfieSegmentation().then((selfieSegmentation) => {\n    const fpsMeter = createFpsMeter();\n    let videoSource: HTMLVideoElement;\n    let canvasTarget: HTMLCanvasElement;\n\n    const createVideo = (mediaStream: MediaStream) => {\n      return mediaStreamToVideo(mediaStream).then((video) => {\n        videoSource = video;\n\n        return videoSource;\n      });\n    };\n\n    let state: {\n      modelSelection: TModelSelection;\n      edgeBlurAmount: number;\n      isBlurBackground: boolean;\n    } = {\n      isBlurBackground: false,\n      modelSelection: 'general',\n      edgeBlurAmount: 4,\n    };\n\n    const getModelSelection = (): TModelSelection => {\n      return state.modelSelection;\n    };\n    const getEdgeBlurAmount = (): number => {\n      return state.edgeBlurAmount;\n    };\n    const getIsBlurBackground = (): boolean => {\n      return state.isBlurBackground;\n    };\n\n    const updateState = (params: {\n      modelSelection: TModelSelection;\n      edgeBlurAmount: number;\n      isBlurBackground: boolean;\n    }) => {\n      state = { ...state, ...params };\n    };\n    const updateOptionsSelfieSegmentation = () => {\n      const GENERAL = 0;\n      const LANDSCAPE = 1;\n\n      console.log(\n        '🚀 ~ file: index.ts ~ line 76 ~ updateOptionsSelfieSegmentation ~ updateOptionsSelfieSegmentation'\n      );\n      selfieSegmentation.setOptions({\n        modelSelection: getModelSelection() === 'general' ? GENERAL : LANDSCAPE,\n      });\n    };\n\n    const changeParams = (params: {\n      modelSelection: TModelSelection;\n      edgeBlurAmount: number;\n      isBlurBackground: boolean;\n    }) => {\n      updateState(params);\n\n      updateOptionsSelfieSegmentation();\n\n      return Promise.resolve();\n    };\n\n    const start = ({\n      mediaStream,\n      modelSelection,\n      edgeBlurAmount,\n      isBlurBackground,\n    }: {\n      mediaStream: MediaStream;\n      modelSelection: TModelSelection;\n      edgeBlurAmount: number;\n      isBlurBackground: boolean;\n    }) => {\n      updateState({ modelSelection, edgeBlurAmount, isBlurBackground });\n      updateOptionsSelfieSegmentation();\n\n      return createVideo(mediaStream).then(() => {\n        const { width, height } = videoSource;\n\n        console.log(\n          '🚀 ~ file: index.ts ~ line 102 ~ returncreateVideo ~ width, height ',\n          width,\n          height\n        );\n\n        canvasTarget = createCanvas(width, height);\n\n        console.log('🚀 ~ file: index.ts ~ line 104 ~ returncreateVideo ~ startVideoProcessing');\n\n        return startVideoProcessing({\n          selfieSegmentation,\n          fpsMeter,\n          getImageBitmapByWidth,\n          canvasTarget,\n          videoSource,\n          getEdgeBlurAmount,\n          getIsBlurBackground,\n        }).then(() => {\n          const mediaStreamOutput = canvasTarget.captureStream();\n\n          return mediaStreamOutput;\n        });\n      });\n    };\n    const stopVideoProcessing = (): Promise<void> => {\n      fpsMeter.reset();\n\n      return selfieSegmentation.close();\n    };\n    const stop = () => {\n      return stopVideoProcessing().then(() => {\n        if (videoSource) {\n          videoSource.srcObject = null;\n        }\n      });\n    };\n\n    const restart = ({\n      mediaStream,\n      modelSelection,\n      edgeBlurAmount,\n      isBlurBackground,\n    }: {\n      mediaStream: MediaStream;\n      modelSelection: TModelSelection;\n      edgeBlurAmount: number;\n      isBlurBackground: boolean;\n    }) => {\n      return stop()\n        .then(createSelfieSegmentation)\n        .then((_selfieSegmentation) => {\n          // eslint-disable-next-line no-param-reassign\n          selfieSegmentation = _selfieSegmentation;\n        })\n        .then(() => {\n          return start({\n            mediaStream,\n            modelSelection,\n            edgeBlurAmount,\n            isBlurBackground,\n          });\n        });\n    };\n\n    return { start, restart, changeParams, stop };\n  });\n};\nexport default resolveProcessVideoMediaPipe;\n"],"names":["createCanvas","width","height","canvas","document","createElement","getContext","type","imageSmoothingQuality","globalCompositeOperation","alpha","context","desynchronized","willReadFrequently","imageSmoothingEnabled","createOffScreenCanvas","OffscreenCanvas","getImageSizes","image","renderImageDataToCanvas","putImageData","renderImageToCanvas","x","y","imageSizes","targetWidth","targetHeight","drawImage","drawWithCompositing","compositeOperation","desiredWidth","desiredHeight","imageToImageBitmap","transferToImageBitmap","stats","isBegins","isEnded","init","Stats","showPanel","window","screen","body","appendChild","dom","begin","end","reset","removeChild","undefined","mediaStream","videoElement","srcObject","Promise","resolve","onloadedmetadata","videoWidth","videoHeight","play","n","a","b","length","done","value","q","Object","defineProperties","defineProperty","e","Array","prototype","u","globalThis","self","global","Math","Error","t","this","v","split","f","h","configurable","writable","w","next","Symbol","iterator","call","i","g","o","j","m","z","TypeError","A","F","G","B","D","l","c","H","return","I","throw","C","J","then","toString","random","d","reject","push","setTimeout","k","console","error","CustomEvent","Event","dispatchEvent","cancelable","createEvent","initCustomEvent","promise","reason","s","p","r","E","catch","race","all","K","assign","arguments","hasOwnProperty","L","M","facingMode","N","video","P","requestAnimationFrame","paused","currentTime","onFrame","Q","stop","getTracks","start","navigator","mediaDevices","getUserMedia","alert","O","T","R","S","execScript","shift","videoSource","imageMask","personMask","edgeBlurAmount","save","filter","restore","isBlurBackground","drawBlurImageMask","drawBackgroundImageMask","selfieSegmentation","fpsMeter","getImageBitmapByWidth","canvasTarget","getEdgeBlurAmount","getIsBlurBackground","imageBitmapMask","onResults","results","drawImageMask","segmentationMask","Camera","async","send","createSelfieSegmentation","SelfieSegmentation","locateFile","file","initialize","imageBitmapMask360p","imageBitmapMask720p","imageBitmapMask1080p","createFpsMeter","state","modelSelection","updateState","params","updateOptionsSelfieSegmentation","log","setOptions","mediaStreamToVideo","createVideo","startVideoProcessing","captureStream","close","restart","_selfieSegmentation","changeParams"],"sourceRoot":""}