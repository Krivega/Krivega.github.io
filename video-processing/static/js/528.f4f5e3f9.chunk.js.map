{"version":3,"file":"static/js/528.f4f5e3f9.chunk.js","mappings":"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","sources":["../../../../node_modules/request-animation-runner/src/requestTimeout.ts","../../../../node_modules/request-animation-runner/src/createRunner.ts","../../../../node_modules/request-animation-runner/src/index.ts","../../../utils/src/canvas.ts","../../../utils/src/createFpsMeter.ts","../../../utils/src/mediaStreamToVideo.ts","../../../video-processor/node_modules/@mediapipe/camera_utils/camera_utils.js","../../../video-processor/src/VideoProcessors/MediaPipe/drawImageMask/drawBackgroundImageMask.ts","../../../video-processor/src/VideoProcessors/MediaPipe/drawImageMask/drawBlurImageMask.ts","../../../video-processor/src/VideoProcessors/MediaPipe/drawImageMask/index.ts","../../../utils/src/createFPSCounter.ts","../../../video-processor/src/VideoProcessors/MediaPipeOptimized/index.ts"],"sourcesContent":["let last = 0;\nlet id = 0;\nconst queue: {\n  handle: number;\n  callback: FrameRequestCallback;\n  cancelled: boolean;\n}[] = [];\nconst frameDuration = 1000 / 60;\n\nexport const request = (callback: FrameRequestCallback) => {\n  if (queue.length === 0) {\n    const time = performance.now();\n    const next = Math.max(0, frameDuration - (time - last));\n\n    last = next + time;\n    setTimeout(() => {\n      const cp = queue.slice(0);\n\n      // Clear queue here to prevent\n      // callbacks from appending listeners\n      // to the current frame's queue\n      queue.length = 0;\n\n      for (let i = 0; i < cp.length; i++) {\n        if (!cp[i].cancelled) {\n          try {\n            cp[i].callback(last);\n          } catch (e) {\n            setTimeout(() => {\n              throw e;\n            }, 0);\n          }\n        }\n      }\n    }, Math.round(next));\n  }\n\n  id += 1;\n  queue.push({\n    handle: id,\n    cancelled: false,\n    callback,\n  });\n\n  return id;\n};\n\nexport const cancelRequest = (handle: number) => {\n  for (let i = 0; i < queue.length; i++) {\n    if (queue[i].handle === handle) {\n      queue[i].cancelled = true;\n    }\n  }\n};\n","// @ts-ignore\nimport { request, cancelRequest } from './requestTimeout';\n\nlet isAvailableAnimation = !document || !document.hidden;\n\nconst createRunner = (backgroundThrottling: boolean = true) => {\n  const hasAvailableAnimation = () => {\n    return backgroundThrottling || isAvailableAnimation;\n  };\n  const restartHandlers = new Map<number, () => void>();\n  const whenRestarted = (handle: number, callback: () => void) => {\n    restartHandlers.set(handle, callback);\n  };\n  const offRestart = (handle: number) => {\n    restartHandlers.delete(handle);\n  };\n\n  const requestAnimationFrame = (callback: FrameRequestCallback): number => {\n    if (hasAvailableAnimation()) {\n      return window.requestAnimationFrame(callback);\n    }\n\n    return request(callback);\n  };\n\n  const cancelAnimationFrame = (handle: number): void => {\n    window.cancelAnimationFrame(handle);\n    cancelRequest(handle);\n  };\n\n  document.addEventListener('visibilitychange', () => {\n    isAvailableAnimation = !document || !document.hidden;\n\n    if (!hasAvailableAnimation()) {\n      restartHandlers.forEach((callback, key) => {\n        callback();\n        offRestart(key);\n      });\n    }\n  });\n\n  return { requestAnimationFrame, cancelAnimationFrame, whenRestarted, offRestart };\n};\n\nexport default createRunner;\n","import createRunner from './createRunner';\n\nexport default class RequestAnimation {\n  private requestID?: number;\n\n  private active = true;\n\n  private runner: ReturnType<typeof createRunner>;\n\n  constructor(\n    { backgroundThrottling }: { backgroundThrottling?: boolean } = {\n      backgroundThrottling: true,\n    }\n  ) {\n    this.runner = createRunner(backgroundThrottling);\n  }\n\n  /**\n   * Resolve the animation loop calculates time elapsed since the last loop\n   * and only draws if your specified fps interval is achieved\n   *\n   * @param {function} animationFunc - Function for animation\n   * @param {number}   fps           - Frames per Second\n   * @param {number}   limit         - Frames summary\n   *\n   * @returns {undefined}\n   */\n  run(animationFunc: FrameRequestCallback, fps: number = 60, limit?: number) {\n    const fpsInterval = 1000 / fps;\n\n    let delta = 0; // 0 for run for first, set Date.now() if no needs first run\n    let count = 0;\n\n    /**\n     * Animate loop\n     *\n     * @param {number} timestamp - DOMHighResTimeStamp similar to the one returned by performance.now()\n     * indicating the point in time when requestAnimationFrame() starts to execute callback functions.\n     *\n     * @returns {undefined}\n     */\n    const animateLoop = (timestamp: number) => {\n      const isLimited = limit && count >= limit;\n\n      if (isLimited) {\n        return;\n      }\n\n      this.request(animateLoop);\n\n      // calc elapsed time since last loop\n      const elapsed = timestamp - delta;\n\n      // if enough time has elapsed, draw the next frame\n\n      if (elapsed > fpsInterval) {\n        // Get ready for next frame by setting delta=timestamp, but also adjust for your\n        // specified fpsInterval not being a multiple of RAF's interval (16.7ms)\n        delta = timestamp - (elapsed % fpsInterval);\n        count += 1;\n\n        animationFunc(timestamp);\n      }\n    };\n\n    this.cancelRequest();\n    this.request(animateLoop);\n  }\n\n  /**\n   * Resolve the animation loop calculates time elapsed since the last loop\n   * and only draws if your specified fps interval is achieved\n   *\n   * @param {function} animationFunc - Function for animation\n   * @param {number}   fps           - Frames per Second\n   * @param {number}   limit         - Frames summary\n   *\n   * @returns {undefined}\n   */\n  async runAsync(animationFunc: FrameRequestCallback, fps: number = 60, limit?: number) {\n    const fpsInterval = 1000 / fps;\n\n    let delta = 0; // 0 for run for first, set Date.now() if no needs first run\n    let count = 0;\n\n    /**\n     * Animate loop\n     *\n     * @param {number} timestamp - DOMHighResTimeStamp similar to the one returned by performance.now()\n     * indicating the point in time when requestAnimationFrame() starts to execute callback functions.\n     *\n     * @returns {undefined}\n     */\n    const animateLoop = async (timestamp: number) => {\n      const isLimited = limit && count >= limit;\n\n      if (isLimited) {\n        return;\n      }\n\n      // calc elapsed time since last loop\n      const elapsed = timestamp - delta;\n\n      // if enough time has elapsed, draw the next frame\n\n      if (elapsed > fpsInterval) {\n        // Get ready for next frame by setting delta=timestamp, but also adjust for your\n        // specified fpsInterval not being a multiple of RAF's interval (16.7ms)\n        delta = timestamp - (elapsed % fpsInterval);\n        count += 1;\n\n        await animationFunc(timestamp);\n      }\n\n      this.request(animateLoop);\n    };\n\n    this.cancelRequest();\n    this.request(animateLoop);\n  }\n\n  /**\n   * Request single call\n   *\n   * @param {function} animationFunc - Function for animation\n   *\n   * @returns {undefined}\n   */\n  request(animationFunc: FrameRequestCallback) {\n    if (this.requestID) {\n      this.runner.offRestart(this.requestID);\n    }\n\n    if (this.active) {\n      this.requestID = this.runner.requestAnimationFrame(animationFunc);\n\n      this.runner.whenRestarted(this.requestID, () => {\n        this.cancelRequest();\n        this.requestID = this.runner.requestAnimationFrame(animationFunc);\n      });\n    }\n  }\n\n  /**\n   * cancelRequest\n   *\n   * @returns {undefined}\n   */\n  cancelRequest() {\n    if (this.requestID) {\n      this.runner.cancelAnimationFrame(this.requestID);\n      this.runner.offRestart(this.requestID);\n    }\n  }\n\n  /**\n   * activate\n   *\n   * @returns {undefined}\n   */\n  activate() {\n    this.cancelRequest();\n    this.active = true;\n  }\n\n  /**\n   * deactivate\n   *\n   * @returns {undefined}\n   */\n  deactivate() {\n    this.cancelRequest();\n    this.active = false;\n  }\n}\n","export type TCanvas = HTMLCanvasElement | OffscreenCanvas;\n\nexport const createCanvas = (width: number, height: number): HTMLCanvasElement => {\n  const canvas = document.createElement('canvas');\n\n  canvas.width = width;\n  canvas.height = height;\n\n  return canvas;\n};\n\nexport const getContext = <T = CanvasRenderingContext2D>(\n  canvas: TCanvas,\n  {\n    type = '2d',\n    imageSmoothingQuality,\n    globalCompositeOperation,\n    alpha = false,\n  }: {\n    type?: '2d';\n    imageSmoothingQuality?: ImageSmoothingQuality;\n    globalCompositeOperation?: GlobalCompositeOperation;\n    alpha?: boolean;\n  } = {}\n): T => {\n  const context = canvas.getContext(type, {\n    alpha,\n    desynchronized: true,\n    willReadFrequently: true,\n  }) as CanvasRenderingContext2D;\n\n  if (imageSmoothingQuality) {\n    context.imageSmoothingEnabled = true;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n  }\n\n  if (globalCompositeOperation) {\n    context.globalCompositeOperation = globalCompositeOperation;\n  }\n\n  const contextReturned = context as unknown as T;\n\n  return contextReturned;\n};\n\nexport const createOffScreenCanvas = (width: number, height: number): OffscreenCanvas => {\n  const offScreenCanvas = new OffscreenCanvas(width, height);\n\n  return offScreenCanvas;\n};\n\nexport const fill = (\n  canvas: TCanvas,\n  {\n    x = 0,\n    y = 0,\n    width,\n    height,\n    color = '#202020',\n  }: {\n    x?: number;\n    y?: number;\n    width: number;\n    height: number;\n    color?: string;\n  }\n) => {\n  const context = getContext(canvas);\n\n  context.fillStyle = color;\n  context.fillRect(x, y, width, height);\n};\n\nconst getImageSizes = (image: CanvasImageSource | ImageBitmap) => {\n  const { height, width } = image as { width: number; height: number };\n\n  return { height, width };\n};\n\nexport const renderImageDataToCanvas = (image: ImageData, canvas) => {\n  const context = getContext(canvas);\n\n  context.putImageData(image, 0, 0);\n};\n\nexport const renderImageToCanvas = (\n  image: CanvasImageSource,\n  canvas: TCanvas,\n  {\n    x = 0,\n    y = 0,\n    width,\n    height,\n    imageSmoothingQuality,\n    alpha,\n    globalCompositeOperation,\n  }: {\n    x?: number;\n    y?: number;\n    width?: number;\n    height?: number;\n    imageSmoothingQuality?: ImageSmoothingQuality;\n    alpha?: boolean;\n    globalCompositeOperation?: GlobalCompositeOperation;\n  } = {}\n) => {\n  const imageSizes = getImageSizes(image);\n  const targetWidth = width || imageSizes.width;\n  const targetHeight = height || imageSizes.height;\n  const context = getContext(canvas, { imageSmoothingQuality, alpha, globalCompositeOperation });\n\n  context.drawImage(image, x, y, targetWidth, targetHeight);\n};\n\nconst drawAndBlurImageOnCanvas = (image, blurAmount, canvas) => {\n  const { height, width } = image;\n  const context = getContext(canvas);\n\n  context.clearRect(0, 0, width, height);\n  context.save();\n\n  context.filter = `blur(${blurAmount}px)`;\n  context.drawImage(image, 0, 0, width, height);\n\n  context.restore();\n};\n\nexport const drawAndBlurImageOnOffScreenCanvas = ({\n  canvas,\n  image,\n  blurAmount,\n}: {\n  canvas: OffscreenCanvas;\n  image: CanvasImageSource;\n  blurAmount: number;\n}) => {\n  if (blurAmount === 0) {\n    renderImageToCanvas(image, canvas);\n  } else {\n    drawAndBlurImageOnCanvas(image, blurAmount, canvas);\n  }\n};\n\nexport const drawWithCompositing = (\n  context: CanvasRenderingContext2D,\n  image: CanvasImageSource,\n  compositeOperation,\n  desiredWidth,\n  desiredHeight\n) => {\n  context.globalCompositeOperation = compositeOperation;\n\n  const { width, height } = image;\n\n  context.drawImage(\n    image,\n    0,\n    0,\n    // @ts-ignore\n    width,\n    height,\n    0,\n    0,\n    desiredWidth,\n    desiredHeight\n  );\n};\n\nexport const imageBitmapToImageData = (canvas, imageBitmap, desiredWidth, desiredHeight) => {\n  const { width, height } = imageBitmap;\n  const context = getContext(canvas);\n\n  context.drawImage(imageBitmap, 0, 0, width, height, 0, 0, desiredWidth, desiredHeight);\n\n  const imageData = context.getImageData(0, 0, desiredWidth, desiredHeight);\n\n  return imageData;\n};\n\nexport const imageToImageBitmap = ({\n  canvas,\n  image,\n}: {\n  canvas: OffscreenCanvas;\n  image: CanvasImageSource;\n}) => {\n  renderImageToCanvas(image, canvas);\n\n  return canvas.transferToImageBitmap();\n};\n","import Stats from 'stats-js';\n\nconst createFpsMeter = () => {\n  let stats;\n  let isBegins = false;\n  let isEnded = true;\n  const init = () => {\n    isBegins = false;\n    isEnded = true;\n    stats = new Stats();\n    stats.showPanel(0);\n\n    if (window.screen.width > 500) {\n      document.body.appendChild(stats.dom);\n    }\n  };\n  const begin = () => {\n    if (stats && isEnded && !isBegins) {\n      isEnded = false;\n      isBegins = true;\n      stats.begin();\n    }\n  };\n  const end = () => {\n    if (stats && isBegins && !isEnded) {\n      isEnded = true;\n      isBegins = false;\n      stats.end();\n    }\n  };\n  const reset = () => {\n    document.body.removeChild(stats.dom);\n    stats = undefined;\n  };\n\n  return { init, begin, end, reset };\n};\n\nexport default createFpsMeter;\n","const mediaStreamToVideo = (mediaStream: MediaStream): Promise<HTMLVideoElement> => {\n  const videoElement = document.createElement('video');\n\n  videoElement.srcObject = mediaStream;\n\n  return new Promise((resolve) => {\n    videoElement.onloadedmetadata = () => {\n      videoElement.width = videoElement.videoWidth;\n      videoElement.height = videoElement.videoHeight;\n      videoElement.play();\n      resolve(videoElement);\n    };\n  });\n};\n\nexport default mediaStreamToVideo;\n","(function(){/*\n\n Copyright The Closure Library Authors.\n SPDX-License-Identifier: Apache-2.0\n*/\n'use strict';function n(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var q=\"function\"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){if(a==Array.prototype||a==Object.prototype)return a;a[b]=e.value;return a};\nfunction t(a){a=[\"object\"==typeof globalThis&&globalThis,a,\"object\"==typeof window&&window,\"object\"==typeof self&&self,\"object\"==typeof global&&global];for(var b=0;b<a.length;++b){var e=a[b];if(e&&e.Math==Math)return e}throw Error(\"Cannot find global object\");}var u=t(this);function v(a,b){if(b)a:{var e=u;a=a.split(\".\");for(var f=0;f<a.length-1;f++){var h=a[f];if(!(h in e))break a;e=e[h]}a=a[a.length-1];f=e[a];b=b(f);b!=f&&null!=b&&q(e,a,{configurable:!0,writable:!0,value:b})}}\nv(\"Symbol\",function(a){function b(l){if(this instanceof b)throw new TypeError(\"Symbol is not a constructor\");return new e(f+(l||\"\")+\"_\"+h++,l)}function e(l,c){this.g=l;q(this,\"description\",{configurable:!0,writable:!0,value:c})}if(a)return a;e.prototype.toString=function(){return this.g};var f=\"jscomp_symbol_\"+(1E9*Math.random()>>>0)+\"_\",h=0;return b});\nv(\"Symbol.iterator\",function(a){if(a)return a;a=Symbol(\"Symbol.iterator\");for(var b=\"Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array\".split(\" \"),e=0;e<b.length;e++){var f=u[b[e]];\"function\"===typeof f&&\"function\"!=typeof f.prototype[a]&&q(f.prototype,a,{configurable:!0,writable:!0,value:function(){return w(n(this))}})}return a});function w(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}\nfunction x(a){var b=\"undefined\"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:n(a)}}function y(){this.i=!1;this.g=null;this.o=void 0;this.j=1;this.m=0;this.h=null}function z(a){if(a.i)throw new TypeError(\"Generator is already running\");a.i=!0}y.prototype.l=function(a){this.o=a};function A(a,b){a.h={F:b,G:!0};a.j=a.m}y.prototype.return=function(a){this.h={return:a};this.j=this.m};function B(a){this.g=new y;this.h=a}\nfunction C(a,b){z(a.g);var e=a.g.g;if(e)return D(a,\"return\"in e?e[\"return\"]:function(f){return{value:f,done:!0}},b,a.g.return);a.g.return(b);return H(a)}function D(a,b,e,f){try{var h=b.call(a.g.g,e);if(!(h instanceof Object))throw new TypeError(\"Iterator result \"+h+\" is not an object\");if(!h.done)return a.g.i=!1,h;var l=h.value}catch(c){return a.g.g=null,A(a.g,c),H(a)}a.g.g=null;f.call(a.g,l);return H(a)}\nfunction H(a){for(;a.g.j;)try{var b=a.h(a.g);if(b)return a.g.i=!1,{value:b.value,done:!1}}catch(e){a.g.o=void 0,A(a.g,e)}a.g.i=!1;if(a.g.h){b=a.g.h;a.g.h=null;if(b.G)throw b.F;return{value:b.return,done:!0}}return{value:void 0,done:!0}}\nfunction I(a){this.next=function(b){z(a.g);a.g.g?b=D(a,a.g.g.next,b,a.g.l):(a.g.l(b),b=H(a));return b};this.throw=function(b){z(a.g);a.g.g?b=D(a,a.g.g[\"throw\"],b,a.g.l):(A(a.g,b),b=H(a));return b};this.return=function(b){return C(a,b)};this[Symbol.iterator]=function(){return this}}function J(a){function b(f){return a.next(f)}function e(f){return a.throw(f)}return new Promise(function(f,h){function l(c){c.done?f(c.value):Promise.resolve(c.value).then(b,e).then(l,h)}l(a.next())})}\nv(\"Promise\",function(a){function b(c){this.h=0;this.i=void 0;this.g=[];this.o=!1;var d=this.j();try{c(d.resolve,d.reject)}catch(g){d.reject(g)}}function e(){this.g=null}function f(c){return c instanceof b?c:new b(function(d){d(c)})}if(a)return a;e.prototype.h=function(c){if(null==this.g){this.g=[];var d=this;this.i(function(){d.l()})}this.g.push(c)};var h=u.setTimeout;e.prototype.i=function(c){h(c,0)};e.prototype.l=function(){for(;this.g&&this.g.length;){var c=this.g;this.g=[];for(var d=0;d<c.length;++d){var g=\nc[d];c[d]=null;try{g()}catch(k){this.j(k)}}}this.g=null};e.prototype.j=function(c){this.i(function(){throw c;})};b.prototype.j=function(){function c(k){return function(m){g||(g=!0,k.call(d,m))}}var d=this,g=!1;return{resolve:c(this.A),reject:c(this.l)}};b.prototype.A=function(c){if(c===this)this.l(new TypeError(\"A Promise cannot resolve to itself\"));else if(c instanceof b)this.C(c);else{a:switch(typeof c){case \"object\":var d=null!=c;break a;case \"function\":d=!0;break a;default:d=!1}d?this.v(c):this.m(c)}};\nb.prototype.v=function(c){var d=void 0;try{d=c.then}catch(g){this.l(g);return}\"function\"==typeof d?this.D(d,c):this.m(c)};b.prototype.l=function(c){this.u(2,c)};b.prototype.m=function(c){this.u(1,c)};b.prototype.u=function(c,d){if(0!=this.h)throw Error(\"Cannot settle(\"+c+\", \"+d+\"): Promise already settled in state\"+this.h);this.h=c;this.i=d;2===this.h&&this.B();this.H()};b.prototype.B=function(){var c=this;h(function(){if(c.I()){var d=u.console;\"undefined\"!==typeof d&&d.error(c.i)}},1)};b.prototype.I=\nfunction(){if(this.o)return!1;var c=u.CustomEvent,d=u.Event,g=u.dispatchEvent;if(\"undefined\"===typeof g)return!0;\"function\"===typeof c?c=new c(\"unhandledrejection\",{cancelable:!0}):\"function\"===typeof d?c=new d(\"unhandledrejection\",{cancelable:!0}):(c=u.document.createEvent(\"CustomEvent\"),c.initCustomEvent(\"unhandledrejection\",!1,!0,c));c.promise=this;c.reason=this.i;return g(c)};b.prototype.H=function(){if(null!=this.g){for(var c=0;c<this.g.length;++c)l.h(this.g[c]);this.g=null}};var l=new e;b.prototype.C=\nfunction(c){var d=this.j();c.s(d.resolve,d.reject)};b.prototype.D=function(c,d){var g=this.j();try{c.call(d,g.resolve,g.reject)}catch(k){g.reject(k)}};b.prototype.then=function(c,d){function g(p,r){return\"function\"==typeof p?function(E){try{k(p(E))}catch(F){m(F)}}:r}var k,m,G=new b(function(p,r){k=p;m=r});this.s(g(c,k),g(d,m));return G};b.prototype.catch=function(c){return this.then(void 0,c)};b.prototype.s=function(c,d){function g(){switch(k.h){case 1:c(k.i);break;case 2:d(k.i);break;default:throw Error(\"Unexpected state: \"+\nk.h);}}var k=this;null==this.g?l.h(g):this.g.push(g);this.o=!0};b.resolve=f;b.reject=function(c){return new b(function(d,g){g(c)})};b.race=function(c){return new b(function(d,g){for(var k=x(c),m=k.next();!m.done;m=k.next())f(m.value).s(d,g)})};b.all=function(c){var d=x(c),g=d.next();return g.done?f([]):new b(function(k,m){function G(E){return function(F){p[E]=F;r--;0==r&&k(p)}}var p=[],r=0;do p.push(void 0),r++,f(g.value).s(G(p.length-1),m),g=d.next();while(!g.done)})};return b});\nvar K=\"function\"==typeof Object.assign?Object.assign:function(a,b){for(var e=1;e<arguments.length;e++){var f=arguments[e];if(f)for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(a[h]=f[h])}return a};v(\"Object.assign\",function(a){return a||K});var L=this||self;var M={facingMode:\"user\",width:640,height:480};function N(a,b){this.video=a;this.i=0;this.h=Object.assign(Object.assign({},M),b)}N.prototype.stop=function(){var a=this,b,e,f,h;return J(new I(new B(function(l){if(a.g){b=a.g.getTracks();e=x(b);for(f=e.next();!f.done;f=e.next())h=f.value,h.stop();a.g=void 0}l.j=0})))};\nN.prototype.start=function(){var a=this,b;return J(new I(new B(function(e){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert(\"No navigator.mediaDevices.getUserMedia exists.\");b=a.h;return e.return(navigator.mediaDevices.getUserMedia({video:{facingMode:b.facingMode,width:b.width,height:b.height}}).then(function(f){O(a,f)}).catch(function(f){var h=\"Failed to acquire camera feed: \"+f;console.error(h);alert(h);throw f;}))})))};\nfunction P(a){window.requestAnimationFrame(function(){Q(a)})}function O(a,b){a.g=b;a.video.srcObject=b;a.video.onloadedmetadata=function(){a.video.play();P(a)}}function Q(a){var b=null;a.video.paused||a.video.currentTime===a.i||(a.i=a.video.currentTime,b=a.h.onFrame());b?b.then(function(){P(a)}):P(a)}var R=[\"Camera\"],S=L;R[0]in S||\"undefined\"==typeof S.execScript||S.execScript(\"var \"+R[0]);\nfor(var T;R.length&&(T=R.shift());)R.length||void 0===N?S[T]&&S[T]!==Object.prototype[T]?S=S[T]:S=S[T]={}:S[T]=N;}).call(this);\n","import { getContext, drawWithCompositing } from '@experiments/utils/src/canvas';\nimport type { TCanvas } from '@experiments/utils/src/canvas';\n\nconst drawBackgroundImageMask = ({\n  videoSource,\n  canvas,\n  imageMask,\n  personMask,\n  edgeBlurAmount,\n}: {\n  videoSource: HTMLVideoElement;\n  canvas: TCanvas;\n  imageMask: HTMLImageElement;\n  personMask: ImageBitmap;\n  edgeBlurAmount: number;\n}) => {\n  const { width, height } = videoSource;\n  const context = getContext(canvas);\n\n  context.save();\n\n  // render original image\n  context.drawImage(videoSource, 0, 0);\n\n  if (edgeBlurAmount > 0) {\n    context.filter = `blur(${edgeBlurAmount}px)`;\n  }\n\n  drawWithCompositing(context, personMask, 'destination-in', width, height);\n\n  context.filter = 'none';\n\n  drawWithCompositing(context, imageMask, 'destination-over', width, height);\n\n  context.restore();\n};\n\nexport default drawBackgroundImageMask;\n","import { getContext, drawWithCompositing } from '@experiments/utils/src/canvas';\nimport type { TCanvas } from '@experiments/utils/src/canvas';\n\nconst drawBlurImageMask = ({\n  videoSource,\n  canvas,\n  personMask,\n  edgeBlurAmount,\n}: {\n  videoSource: HTMLVideoElement;\n  canvas: TCanvas;\n  personMask: ImageBitmap;\n  edgeBlurAmount: number;\n}) => {\n  const { width, height } = videoSource;\n  const context = getContext(canvas);\n\n  context.save();\n  // render original image\n  context.drawImage(videoSource, 0, 0);\n\n  drawWithCompositing(context, personMask, 'destination-in', width, height);\n\n  context.filter = `blur(${edgeBlurAmount}px)`;\n\n  drawWithCompositing(context, videoSource, 'destination-over', width, height);\n\n  context.filter = 'none';\n\n  context.restore();\n};\n\nexport default drawBlurImageMask;\n","import { getContext } from '@experiments/utils/src/canvas';\nimport type { TCanvas } from '@experiments/utils/src/canvas';\nimport drawBackgroundImageMask from './drawBackgroundImageMask';\nimport drawBlurImageMask from './drawBlurImageMask';\n\nconst drawImageMask = ({\n  videoSource,\n  canvas,\n  imageMask,\n  personMask,\n  edgeBlurAmount,\n  isBlurBackground,\n}: {\n  videoSource: HTMLVideoElement;\n  canvas: TCanvas;\n  imageMask: HTMLImageElement;\n  personMask?: ImageBitmap;\n  edgeBlurAmount: number;\n  isBlurBackground: boolean;\n}) => {\n  if (!personMask) {\n    const context = getContext(canvas);\n\n    context.drawImage(videoSource, 0, 0);\n\n    return;\n  }\n\n  if (isBlurBackground) {\n    drawBlurImageMask({\n      videoSource,\n      canvas,\n      personMask,\n      edgeBlurAmount,\n    });\n  } else {\n    drawBackgroundImageMask({\n      videoSource,\n      canvas,\n      imageMask,\n      personMask,\n      edgeBlurAmount,\n    });\n  }\n};\n\nexport default drawImageMask;\n","const createFPSCounter = () => {\n  const fpsCounter = {\n    sampleSize: 60,\n    value: 0,\n    _sample_: [] as number[],\n    _index_: 0,\n    _lastTick_: 0,\n    tick() {\n      // if is first tick, just set tick timestamp and return\n      if (!this._lastTick_) {\n        this._lastTick_ = performance.now();\n\n        return 0;\n      }\n\n      // calculate necessary values to obtain current tick FPS\n      const now = performance.now();\n      const delta = (now - this._lastTick_) / 1000;\n      const fps = 1 / delta;\n\n      // add to fps samples, current tick fps value\n      this._sample_[this._index_] = Math.round(fps);\n\n      // iterate samples to obtain the average\n      let average = 0;\n\n      for (let i = 0; i < this._sample_.length; i++) {\n        average += this._sample_[i];\n      }\n\n      average = Math.round(average / this._sample_.length);\n\n      // set new FPS\n      this.value = average;\n      // store current timestamp\n      this._lastTick_ = now;\n      // increase sample index counter, and reset it\n      // to 0 if exceded maximum sampleSize limit\n      this._index_ += 1;\n\n      if (this._index_ === this.sampleSize) this._index_ = 0;\n\n      return this.value;\n    },\n  };\n\n  return fpsCounter;\n};\n\nexport default createFPSCounter;\n","import AnimationRequest from 'request-animation-runner';\nimport { Camera } from '@mediapipe/camera_utils';\nimport { SelfieSegmentation } from '@mediapipe/selfie_segmentation';\nimport type { ResultsListener } from '@mediapipe/selfie_segmentation';\nimport createFpsMeter from '@experiments/utils/src/createFpsMeter';\nimport createFPSCounter from '@experiments/utils/src/createFPSCounter';\nimport mediaStreamToVideo from '@experiments/utils/src/mediaStreamToVideo';\nimport { createCanvas } from '@experiments/utils/src/canvas';\nimport type { TResolveProcessVideo, TModelSelection } from '../../typings';\nimport drawImageMask from '../MediaPipe/drawImageMask';\n\nconst createSelfieSegmentation = (): Promise<SelfieSegmentation> => {\n  const selfieSegmentation = new SelfieSegmentation({\n    locateFile: (file) => {\n      return `https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${file}`;\n    },\n  });\n\n  return selfieSegmentation.initialize().then(() => {\n    return selfieSegmentation;\n  });\n};\n\nconst resolveProcessVideoMediaPipeOptimized: TResolveProcessVideo = ({\n  imageBitmapMask360p,\n  imageBitmapMask720p,\n  imageBitmapMask1080p,\n}) => {\n  const getImageBitmapByWidth = (width: number): HTMLImageElement => {\n    // eslint-disable-next-line default-case\n    switch (width) {\n      case 640:\n        return imageBitmapMask360p;\n      case 1280:\n        return imageBitmapMask720p;\n    }\n\n    return imageBitmapMask1080p;\n  };\n\n  return createSelfieSegmentation().then((selfieSegmentation) => {\n    const fpsMeter = createFpsMeter();\n    const fpsCounter = createFPSCounter();\n    const animationRequest = new AnimationRequest();\n    let videoSource: HTMLVideoElement;\n    let canvasTarget: HTMLCanvasElement;\n\n    const createVideo = (mediaStream: MediaStream) => {\n      return mediaStreamToVideo(mediaStream).then((video) => {\n        videoSource = video;\n\n        return videoSource;\n      });\n    };\n    const isInProgressVideoProcessing = false;\n    const checkEndProgressVideoProcessing = () => {\n      return new Promise<void>((resolve) => {\n        const check = () => {\n          if (isInProgressVideoProcessing === false) {\n            resolve();\n          } else {\n            setTimeout(check, 100);\n          }\n        };\n\n        check();\n      });\n    };\n    const startVideoProcessing = ({\n      modelSelection,\n      edgeBlurAmount,\n      isBlurBackground,\n    }: {\n      modelSelection: TModelSelection;\n      edgeBlurAmount: number;\n      isBlurBackground: boolean;\n    }) => {\n      const { width, height } = videoSource;\n\n      const imageBitmapMask = getImageBitmapByWidth(width);\n\n      fpsMeter.init();\n\n      let personMask: ImageBitmap | undefined;\n\n      const targetVideoFrame = () => {\n        drawImageMask({\n          edgeBlurAmount,\n          personMask,\n          videoSource,\n          isBlurBackground,\n          imageMask: imageBitmapMask,\n          canvas: canvasTarget,\n        });\n        fpsMeter.end();\n        fpsCounter.tick();\n      };\n\n      const onResults: ResultsListener = (results) => {\n        personMask = results.segmentationMask as ImageBitmap;\n        targetVideoFrame();\n      };\n\n      const GENERAL = 0;\n      const LANDSCAPE = 1;\n\n      selfieSegmentation.setOptions({\n        modelSelection: modelSelection === 'general' ? GENERAL : LANDSCAPE,\n      });\n      selfieSegmentation.onResults(onResults);\n\n      const camera = new Camera(videoSource, {\n        onFrame: async () => {\n          fpsMeter.begin();\n          await selfieSegmentation.send({ image: videoSource });\n        },\n        width,\n        height,\n      });\n\n      camera.start();\n\n      animationRequest.activate();\n      animationRequest.run(() => {\n        if (fpsCounter.value < 60 && personMask) {\n          // targetVideoFrame();\n          console.log(\n            '🚀 ~ file: index.ts ~ line 117 ~ animationRequest.run ~ targetVideoFrame',\n            fpsCounter.value\n          );\n        }\n      }, 60);\n    };\n\n    const start = ({\n      mediaStream,\n      modelSelection,\n      edgeBlurAmount,\n      isBlurBackground,\n    }: {\n      mediaStream: MediaStream;\n      modelSelection: TModelSelection;\n      edgeBlurAmount: number;\n      isBlurBackground: boolean;\n    }) => {\n      return createVideo(mediaStream).then(() => {\n        const { width, height } = videoSource;\n\n        canvasTarget = createCanvas(width, height);\n\n        startVideoProcessing({ modelSelection, edgeBlurAmount, isBlurBackground });\n\n        const mediaStreamOutput = canvasTarget.captureStream();\n\n        return mediaStreamOutput;\n      });\n    };\n    const stopVideoProcessing = () => {\n      animationRequest.deactivate();\n      fpsMeter.reset();\n\n      return checkEndProgressVideoProcessing();\n\n      // return selfieSegmentation.close().then(checkEndProgressVideoProcessing);\n    };\n    const stop = () => {\n      return stopVideoProcessing().then(() => {\n        if (videoSource) {\n          videoSource.srcObject = null;\n        }\n      });\n    };\n\n    const changeParams = ({\n      modelSelection,\n      edgeBlurAmount,\n      isBlurBackground,\n    }: {\n      modelSelection: TModelSelection;\n      edgeBlurAmount: number;\n      isBlurBackground: boolean;\n    }) => {\n      return stopVideoProcessing()\n        .then(() => {})\n        .then(() => {\n          return startVideoProcessing({ modelSelection, edgeBlurAmount, isBlurBackground });\n        });\n    };\n    const restart = ({\n      mediaStream,\n      modelSelection,\n      edgeBlurAmount,\n      isBlurBackground,\n    }: {\n      mediaStream: MediaStream;\n      modelSelection: TModelSelection;\n      edgeBlurAmount: number;\n      isBlurBackground: boolean;\n    }) => {\n      return stop().then(() => {\n        return start({\n          mediaStream,\n          modelSelection,\n          edgeBlurAmount,\n          isBlurBackground,\n        });\n      });\n    };\n\n    return { start, restart, changeParams, stop };\n  });\n};\nexport default resolveProcessVideoMediaPipeOptimized;\n"],"names":["last","id","queue","isAvailableAnimation","document","hidden","offRestart","RequestAnimation","constructor","backgroundThrottling","this","runner","hasAvailableAnimation","restartHandlers","Map","handle","delete","addEventListener","forEach","callback","key","requestAnimationFrame","window","length","time","performance","now","next","Math","max","setTimeout","cp","slice","i","cancelled","e","round","push","cancelAnimationFrame","whenRestarted","set","createRunner","run","animationFunc","limit","fpsInterval","delta","count","animateLoop","timestamp","request","elapsed","cancelRequest","runAsync","fps","requestID","active","activate","deactivate","createCanvas","width","height","canvas","createElement","getContext","type","imageSmoothingQuality","globalCompositeOperation","alpha","context","desynchronized","willReadFrequently","imageSmoothingEnabled","createOffScreenCanvas","OffscreenCanvas","getImageSizes","image","renderImageDataToCanvas","putImageData","renderImageToCanvas","x","y","imageSizes","targetWidth","targetHeight","drawImage","drawWithCompositing","compositeOperation","desiredWidth","desiredHeight","imageToImageBitmap","transferToImageBitmap","stats","isBegins","isEnded","init","Stats","showPanel","screen","body","appendChild","dom","begin","end","reset","removeChild","undefined","mediaStream","videoElement","srcObject","Promise","resolve","onloadedmetadata","videoWidth","videoHeight","play","n","a","b","done","value","q","Object","defineProperties","defineProperty","Array","prototype","u","globalThis","self","global","Error","t","v","split","f","h","configurable","writable","w","Symbol","iterator","call","g","o","j","m","z","TypeError","A","F","G","B","D","l","c","H","return","I","throw","C","J","then","toString","random","d","reject","k","console","error","CustomEvent","Event","dispatchEvent","cancelable","createEvent","initCustomEvent","promise","reason","s","p","r","E","catch","race","all","K","assign","arguments","hasOwnProperty","L","M","facingMode","N","video","P","paused","currentTime","onFrame","Q","stop","getTracks","start","navigator","mediaDevices","getUserMedia","alert","O","T","R","S","execScript","shift","videoSource","imageMask","personMask","edgeBlurAmount","save","filter","restore","isBlurBackground","drawBlurImageMask","drawBackgroundImageMask","sampleSize","_sample_","_index_","_lastTick_","tick","average","imageBitmapMask360p","imageBitmapMask720p","imageBitmapMask1080p","selfieSegmentation","SelfieSegmentation","locateFile","file","initialize","createSelfieSegmentation","fpsMeter","createFpsMeter","fpsCounter","createFPSCounter","animationRequest","AnimationRequest","canvasTarget","startVideoProcessing","modelSelection","imageBitmapMask","getImageBitmapByWidth","setOptions","onResults","results","segmentationMask","drawImageMask","Camera","async","send","log","mediaStreamToVideo","createVideo","captureStream","stopVideoProcessing","restart","changeParams"],"sourceRoot":""}